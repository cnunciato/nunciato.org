#!/usr/bin/env bash

set -euo pipefail

# This works, but then you have to run it ever time, which makes the initial
# pipeline-upload step unnecessarily slow. So

# echo "Installing Mise..."
export MISE_DATA_DIR="/mise"
export MISE_CONFIG_DIR="/mise"
export MISE_CACHE_DIR="/mise/cache"
export MISE_INSTALL_PATH="/usr/bin/mise"
echo $PATH
export PATH="/mise/shims:$PATH"
curl https://mise.run | sh

# echo "Installing Mise-managed tooling..."
mise install

export PATH="$(mise where node)/bin:$PATH"
which node
node -v
